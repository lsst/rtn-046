%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Document:      DM  operations product tree
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass{article}
\usepackage{times,layouts}
\usepackage{tikz,hyperref,amsmath}
\usetikzlibrary{positioning,arrows,shapes,decorations.shapes,shapes.arrows}
\usetikzlibrary{backgrounds,calc}
\usepackage[paperwidth=19.5cm,paperheight=73.82000000000001cm,
left=-2mm,top=3mm,bottom=0mm,right=0mm,
noheadfoot,marginparwidth=0pt,includemp=false,
textwidth=30cm,textheight=50mm]{geometry}
\newcommand\showpage{%
\setlayoutscale{0.5}\setlabelfont{\tiny}\printheadingsfalse\printparametersfalse
\currentpage\pagedesign}
\hypersetup{pdftitle={DM products }, pdfsubject={Diagram illustrating the
products in LSST DM }, pdfauthor={ William O'Mullane}}
\tikzstyle{tbox}=[rectangle,text centered, text width=30mm]
\tikzstyle{wbbox}=[rectangle, rounded corners=3pt, draw=black, top color=blue!50!white, bottom color=white, very thick, minimum height=12mm, inner sep=2pt, text centered, text width=30mm]
\tikzstyle{pbox}=[rectangle, rounded corners=3pt, draw=black, top color=yellow!50!white, bottom color=white, very thick, minimum height=35pt, inner sep=2pt, text centered, text width=35mm]
\tikzstyle{abox}=[rectangle, rounded corners=3pt, draw=black, top color=green!50!white, bottom color=white, very thick, minimum height=35pt, inner sep=2pt, text centered, text width=35mm]
\tikzstyle{tbox}=[rectangle, rounded corners=3pt, draw=black, top color=blue!50!white, bottom color=white, very thick, minimum height=35pt, inner sep=2pt, text centered, text width=35mm]
\tikzstyle{gbox}=[rectangle, rounded corners=3pt, draw=black, top color=cyan!50!white, bottom color=white, very thick, minimum height=35pt, inner sep=2pt, text centered, text width=35mm]
\tikzstyle{pline}=[-, thick]
\begin{document}
\begin{tikzpicture}[node distance=0mm]
\node (0-DM) [wbbox]{\textbf{DM Ops}};
\node (1-DA) [tbox,right=15mm of 0-DM] {\textbf{Data Abstraction} };
\node [below right] at (1-DA.north west) {\small \color{blue}Team} ;
 \draw[pline] (0-DM.east) -| ++(0.4,0) |- (1-DA.west); 
\node (2-DataEng) [abox,right=15mm of 1-DA] {\textbf{Data Engineering} };
\node [below right] at (2-DataEng.north west) {\small \color{blue}Activity} ;
 \draw[pline] (1-DA.east) -| ++(0.4,0) |- (2-DataEng.west); 
\node (3-felis) [pbox,right=15mm of 2-DataEng] {\textbf{Felis} };
\node [below right] at (3-felis.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-DataEng.east) -| ++(0.4,0) |- (3-felis.west); 
\node (3-meta) [abox,below=4pt of 3-felis] {\textbf{Metadata} };
\node [below right] at (3-meta.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-DataEng.east) -| ++(0.4,0) |- (3-meta.west); 
\node (2-Middle) [abox,below=45pt of 2-DataEng] {\textbf{Middleware} };
\node [below right] at (2-Middle.north west) {\small \color{blue}Activity} ;
 \draw[pline] (1-DA.east) -| ++(0.4,0) |- (2-Middle.west); 
\node (3-bps) [pbox,right=15mm of 2-Middle] {\textbf{BPS} };
\node [below right] at (3-bps.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-Middle.east) -| ++(0.4,0) |- (3-bps.west); 
\node (3-butler) [pbox,below=4pt of 3-bps] {\textbf{Butler} };
\node [below right] at (3-butler.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-Middle.east) -| ++(0.4,0) |- (3-butler.west); 
\node (3-ctrl) [pbox,below=4pt of 3-butler] {\textbf{Control Interface} };
\node [below right] at (3-ctrl.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-Middle.east) -| ++(0.4,0) |- (3-ctrl.west); 
\node (4-cbps) [pbox,right=15mm of 3-ctrl] {\textbf{ctrl\_bps} };
\node [below right] at (4-cbps.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-ctrl.east) -| ++(0.4,0) |- (4-cbps.west); 
\node (4-cmp) [pbox,below=4pt of 4-cbps] {\textbf{ctrl\_mpexec} };
\node [below right] at (4-cmp.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-ctrl.east) -| ++(0.4,0) |- (4-cmp.west); 
\node (4-ubat) [pbox,below=4pt of 4-cmp] {\textbf{user batch envelope} };
\node [below right] at (4-ubat.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-ctrl.east) -| ++(0.4,0) |- (4-ubat.west); 
\node (3-spinter) [pbox,below=86pt of 3-ctrl] {\textbf{Pipeline interfaces} };
\node [below right] at (3-spinter.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-Middle.east) -| ++(0.4,0) |- (3-spinter.west); 
\node (4-pex) [pbox,right=15mm of 3-spinter] {\textbf{pex\_config} };
\node [below right] at (4-pex.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-spinter.east) -| ++(0.4,0) |- (4-pex.west); 
\node (4-pip) [pbox,below=4pt of 4-pex] {\textbf{pipe\_base} };
\node [below right] at (4-pip.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-spinter.east) -| ++(0.4,0) |- (4-pip.west); 
\node (2-SingleExec) [pbox,below=250pt of 2-Middle] {\textbf{Single-site Exec} };
\node [below right] at (2-SingleExec.north west) {\small \color{blue}Product} ;
 \draw[pline] (1-DA.east) -| ++(0.4,0) |- (2-SingleExec.west); 
\node (3-ocps) [pbox,right=15mm of 2-SingleExec] {\textbf{OCPS} };
\node [below right] at (3-ocps.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-SingleExec.east) -| ++(0.4,0) |- (3-ocps.west); 
\node (3-prompt) [pbox,below=4pt of 3-ocps] {\textbf{Prompt f/ w} };
\node [below right] at (3-prompt.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-SingleExec.east) -| ++(0.4,0) |- (3-prompt.west); 
\node (1-DAL) [tbox,below=414pt of 1-DA] {\textbf{Data Acquisition LHN} };
\node [below right] at (1-DAL.north west) {\small \color{blue}Team} ;
 \draw[pline] (0-DM.east) -| ++(0.4,0) |- (1-DAL.west); 
\node (2-CDevOps) [tbox,right=15mm of 1-DAL] {\textbf{Chile DevOps} };
\node [below right] at (2-CDevOps.north west) {\small \color{blue}Team} ;
 \draw[pline] (1-DAL.east) -| ++(0.4,0) |- (2-CDevOps.west); 
\node (1-DF) [gbox,below=4pt of 1-DAL] {\textbf{Data Facilities} };
\node [below right] at (1-DF.north west) {\small \color{blue}Group} ;
 \draw[pline] (0-DM.east) -| ++(0.4,0) |- (1-DF.west); 
\node (2-Curation) [tbox,right=15mm of 1-DF] {\textbf{Data Curation} };
\node [below right] at (2-Curation.north west) {\small \color{blue}Team} ;
 \draw[pline] (1-DF.east) -| ++(0.4,0) |- (2-Curation.west); 
\node (3-Backbone) [abox,right=15mm of 2-Curation] {\textbf{Data Backbone} };
\node [below right] at (3-Backbone.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-Curation.east) -| ++(0.4,0) |- (3-Backbone.west); 
\node (3-Backups) [abox,below=4pt of 3-Backbone] {\textbf{Backups} };
\node [below right] at (3-Backups.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-Curation.east) -| ++(0.4,0) |- (3-Backups.west); 
\node (3-Bulk) [abox,below=4pt of 3-Backups] {\textbf{Bulk Download} };
\node [below right] at (3-Bulk.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-Curation.east) -| ++(0.4,0) |- (3-Bulk.west); 
\node (3-Consol) [abox,below=4pt of 3-Bulk] {\textbf{Consolidated DB} };
\node [below right] at (3-Consol.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-Curation.east) -| ++(0.4,0) |- (3-Consol.west); 
\node (3-Repos) [abox,below=4pt of 3-Consol] {\textbf{Butler repos} };
\node [below right] at (3-Repos.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-Curation.east) -| ++(0.4,0) |- (3-Repos.west); 
\node (3-Rucio) [abox,below=4pt of 3-Repos] {\textbf{Rucio} };
\node [below right] at (3-Rucio.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-Curation.east) -| ++(0.4,0) |- (3-Rucio.west); 
\node (2-Infra) [gbox,below=209pt of 2-Curation] {\textbf{Infrastructures} };
\node [below right] at (2-Infra.north west) {\small \color{blue}Group} ;
 \draw[pline] (1-DF.east) -| ++(0.4,0) |- (2-Infra.west); 
\node (3-cdac) [tbox,right=15mm of 2-Infra] {\textbf{CDAC} };
\node [below right] at (3-cdac.north west) {\small \color{blue}Team} ;
 \draw[pline] (2-Infra.east) -| ++(0.4,0) |- (3-cdac.west); 
\node (3-frdf) [tbox,below=4pt of 3-cdac] {\textbf{FrDF} };
\node [below right] at (3-frdf.north west) {\small \color{blue}Team} ;
 \draw[pline] (2-Infra.east) -| ++(0.4,0) |- (3-frdf.west); 
\node (3-sdf) [tbox,below=4pt of 3-frdf] {\textbf{SDF} };
\node [below right] at (3-sdf.north west) {\small \color{blue}Team} ;
 \draw[pline] (2-Infra.east) -| ++(0.4,0) |- (3-sdf.west); 
\node (3-ukdf) [tbox,below=4pt of 3-sdf] {\textbf{UKDF} };
\node [below right] at (3-ukdf.north west) {\small \color{blue}Team} ;
 \draw[pline] (2-Infra.east) -| ++(0.4,0) |- (3-ukdf.west); 
\node (3-usdf) [tbox,below=4pt of 3-ukdf] {\textbf{USDF} };
\node [below right] at (3-usdf.north west) {\small \color{blue}Team} ;
 \draw[pline] (2-Infra.east) -| ++(0.4,0) |- (3-usdf.west); 
\node (2-MultiExec) [abox,below=168pt of 2-Infra] {\textbf{Multi-site \&  User Exec} };
\node [below right] at (2-MultiExec.north west) {\small \color{blue}Activity} ;
 \draw[pline] (1-DF.east) -| ++(0.4,0) |- (2-MultiExec.west); 
\node (3-Panda) [pbox,right=15mm of 2-MultiExec] {\textbf{PanDA} };
\node [below right] at (3-Panda.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-MultiExec.east) -| ++(0.4,0) |- (3-Panda.west); 
\node (3-ubatch) [pbox,below=4pt of 3-Panda] {\textbf{User Batch} };
\node [below right] at (3-ubatch.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-MultiExec.east) -| ++(0.4,0) |- (3-ubatch.west); 
\node (4-UWS) [pbox,right=15mm of 3-ubatch] {\textbf{UWS} };
\node [below right] at (4-UWS.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-ubatch.east) -| ++(0.4,0) |- (4-UWS.west); 
\node (1-DP) [gbox,below=496pt of 1-DF] {\textbf{Data Production} };
\node [below right] at (1-DP.north west) {\small \color{blue}Group} ;
 \draw[pline] (0-DM.east) -| ++(0.4,0) |- (1-DP.west); 
\node (2-Camp) [tbox,right=15mm of 1-DP] {\textbf{Campaign Management} };
\node [below right] at (2-Camp.north west) {\small \color{blue}Team} ;
 \draw[pline] (1-DP.east) -| ++(0.4,0) |- (2-Camp.west); 
\node (2-SciPip) [tbox,below=4pt of 2-Camp] {\textbf{Algorithms \&  Pipelines} };
\node [below right] at (2-SciPip.north west) {\small \color{blue}Team} ;
 \draw[pline] (1-DP.east) -| ++(0.4,0) |- (2-SciPip.west); 
\node (1-DS) [gbox,below=45pt of 1-DP] {\textbf{Data Services} };
\node [below right] at (1-DS.north west) {\small \color{blue}Group} ;
 \draw[pline] (0-DM.east) -| ++(0.4,0) |- (1-DS.west); 
\node (2-CompDb) [tbox,right=15mm of 1-DS] {\textbf{Complex. DB} };
\node [below right] at (2-CompDb.north west) {\small \color{blue}Team} ;
 \draw[pline] (1-DS.east) -| ++(0.4,0) |- (2-CompDb.west); 
\node (3-BigDB) [abox,right=15mm of 2-CompDb] {\textbf{Big Databases} };
\node [below right] at (3-BigDB.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-CompDb.east) -| ++(0.4,0) |- (3-BigDB.west); 
\node (4-PromptDB) [pbox,right=15mm of 3-BigDB] {\textbf{PromptDV} };
\node [below right] at (4-PromptDB.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-BigDB.east) -| ++(0.4,0) |- (4-PromptDB.west); 
\node (4-Qserv) [pbox,below=4pt of 4-PromptDB] {\textbf{Qserv} };
\node [below right] at (4-Qserv.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-BigDB.east) -| ++(0.4,0) |- (4-Qserv.west); 
\node (3-uDB) [abox,below=45pt of 3-BigDB] {\textbf{User Databases} };
\node [below right] at (3-uDB.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-CompDb.east) -| ++(0.4,0) |- (3-uDB.west); 
\node (2-Portal) [pbox,below=86pt of 2-CompDb] {\textbf{RSP Portal} };
\node [below right] at (2-Portal.north west) {\small \color{blue}Product} ;
 \draw[pline] (1-DS.east) -| ++(0.4,0) |- (2-Portal.west); 
\node (2-SQuaRE) [tbox,below=4pt of 2-Portal] {\textbf{SQuaRE} };
\node [below right] at (2-SQuaRE.north west) {\small \color{blue}Team} ;
 \draw[pline] (1-DS.east) -| ++(0.4,0) |- (2-SQuaRE.west); 
\node (3-Doc) [abox,right=15mm of 2-SQuaRE] {\textbf{Doc Services} };
\node [below right] at (3-Doc.north west) {\small \color{blue}Activity} ;
 \draw[pline] (2-SQuaRE.east) -| ++(0.4,0) |- (3-Doc.west); 
\node (4-dochow) [pbox,right=15mm of 3-Doc] {\textbf{Documentation standards} };
\node [below right] at (4-dochow.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-Doc.east) -| ++(0.4,0) |- (4-dochow.west); 
\node (4-ltd) [pbox,below=4pt of 4-dochow] {\textbf{LtD} };
\node [below right] at (4-ltd.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-Doc.east) -| ++(0.4,0) |- (4-ltd.west); 
\node (4-templ) [pbox,below=4pt of 4-ltd] {\textbf{Templating} };
\node [below right] at (4-templ.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-Doc.east) -| ++(0.4,0) |- (4-templ.west); 
\node (3-Phal) [pbox,below=86pt of 3-Doc] {\textbf{Phalanx} };
\node [below right] at (3-Phal.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-SQuaRE.east) -| ++(0.4,0) |- (3-Phal.west); 
\node (4-auth) [abox,right=15mm of 3-Phal] {\textbf{Authorisation} };
\node [below right] at (4-auth.north west) {\small \color{blue}Activity} ;
 \draw[pline] (3-Phal.east) -| ++(0.4,0) |- (4-auth.west); 
\node (4-releng) [abox,below=4pt of 4-auth] {\textbf{Reliability Engineering} };
\node [below right] at (4-releng.north west) {\small \color{blue}Activity} ;
 \draw[pline] (3-Phal.east) -| ++(0.4,0) |- (4-releng.west); 
\node (4-secret) [abox,below=4pt of 4-releng] {\textbf{Secrets} };
\node [below right] at (4-secret.north west) {\small \color{blue}Activity} ;
 \draw[pline] (3-Phal.east) -| ++(0.4,0) |- (4-secret.west); 
\node (3-RSP) [pbox,below=86pt of 3-Phal] {\textbf{RSP} };
\node [below right] at (3-RSP.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-SQuaRE.east) -| ++(0.4,0) |- (3-RSP.west); 
\node (4-api) [pbox,right=15mm of 3-RSP] {\textbf{APIs} };
\node [below right] at (4-api.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-RSP.east) -| ++(0.4,0) |- (4-api.west); 
\node (4-flag) [pbox,below=4pt of 4-api] {\textbf{data.lsst.cloud} };
\node [below right] at (4-flag.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-RSP.east) -| ++(0.4,0) |- (4-flag.west); 
\node (4-ident) [pbox,below=4pt of 4-flag] {\textbf{Authentication} };
\node [below right] at (4-ident.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-RSP.east) -| ++(0.4,0) |- (4-ident.west); 
\node (4-nb) [pbox,below=4pt of 4-ident] {\textbf{Notebook} };
\node [below right] at (4-nb.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-RSP.east) -| ++(0.4,0) |- (4-nb.west); 
\node (4-portal) [pbox,below=4pt of 4-nb] {\textbf{Portal} };
\node [below right] at (4-portal.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-RSP.east) -| ++(0.4,0) |- (4-portal.west); 
\node (4-sqrone) [pbox,below=4pt of 4-portal] {\textbf{Square One} };
\node [below right] at (4-sqrone.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-RSP.east) -| ++(0.4,0) |- (4-sqrone.west); 
\node (4-support) [pbox,below=4pt of 4-sqrone] {\textbf{User Support} };
\node [below right] at (4-support.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-RSP.east) -| ++(0.4,0) |- (4-support.west); 
\node (3-Sasq) [pbox,below=250pt of 3-RSP] {\textbf{Sasquatch} };
\node [below right] at (3-Sasq.north west) {\small \color{blue}Product} ;
 \draw[pline] (2-SQuaRE.east) -| ++(0.4,0) |- (3-Sasq.west); 
\node (4-efd) [pbox,right=15mm of 3-Sasq] {\textbf{EFD} };
\node [below right] at (4-efd.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-Sasq.east) -| ++(0.4,0) |- (4-efd.west); 
\node (4-metric) [pbox,below=4pt of 4-efd] {\textbf{Metrics} };
\node [below right] at (4-metric.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-Sasq.east) -| ++(0.4,0) |- (4-metric.west); 
\node (4-telgw) [pbox,below=4pt of 4-metric] {\textbf{Telemetry Gateway} };
\node [below right] at (4-telgw.north west) {\small \color{blue}Product} ;
 \draw[pline] (3-Sasq.east) -| ++(0.4,0) |- (4-telgw.west); 
\end{tikzpicture}
\end{document}
